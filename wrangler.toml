# Configuración de Cloudflare Workers para la API de Ecdotica
# Este archivo define cómo se despliega la aplicación FastAPI en Cloudflare Workers

name = "ecdotica-api"
main = "src/api/main.py"
compatibility_date = "2025-11-19"

# Configuración del Worker
workers_dev = true

# Variables de entorno (puedes agregar más según necesites)
[vars]
ENVIRONMENT = "production"
API_VERSION = "1.0.0"

# Configuración de CORS (ya está en main.py, pero puedes sobrescribir aquí)
# CORS_ORIGINS = "https://ecdotica.com,https://www.ecdotica.com"

# Configuración de producción
[env.production]
name = "ecdotica-api"
route = { pattern = "api.ecdotica.com/*", zone_name = "ecdotica.com" }

# Nota: Para usar un dominio personalizado (api.ecdotica.com),
# necesitas:
# 1. Tener el dominio ecdotica.com en Cloudflare
# 2. Configurar el DNS para apuntar a tu Worker
# 3. Ejecutar: wrangler deploy --env production

# Para desarrollo/testing, simplemente usa:
# wrangler deploy
# Esto te dará una URL como: https://ecdotica-api.tu-cuenta.workers.dev
